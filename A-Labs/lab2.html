<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-A-Labs/lab2">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-rc.1">
<link rel="icon" href="/OPS245dev/img/pwa/icon-512x512.png">
<link rel="manifest" href="/OPS245dev/manifest.json">
<meta name="theme-color" content="#DA291C">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#DA291C">
<link rel="apple-touch-icon" href="/OPS245dev/img/pwa/icon-192x192.png">
<link rel="mask-icon" href="/OPS245dev/img/pwa/icon-512x512.png" color="#DA291C">
<meta name="msapplication-TileImage" content="/OPS245dev/img/pwa/icon-512x512.png">
<meta name="msapplication-TileColor" content="#DA291C">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">Lab 2 | OPS245 - Dev Space for Fall 2023</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://Seneca-ICTOER.github.io//OPS245dev/A-Labs/lab2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lab 2 | OPS245 - Dev Space for Fall 2023"><meta data-rh="true" name="description" content="Lab 2"><meta data-rh="true" property="og:description" content="Lab 2"><link data-rh="true" rel="icon" href="/OPS245dev/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Seneca-ICTOER.github.io//OPS245dev/A-Labs/lab2"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//OPS245dev/A-Labs/lab2" hreflang="en"><link data-rh="true" rel="alternate" href="https://Seneca-ICTOER.github.io//OPS245dev/A-Labs/lab2" hreflang="x-default"><link rel="stylesheet" href="/OPS245dev/assets/css/styles.099fe1a9.css">
<link rel="preload" href="/OPS245dev/assets/js/runtime~main.a542e620.js" as="script">
<link rel="preload" href="/OPS245dev/assets/js/main.b4a20da8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/OPS245dev/"><div class="navbar__logo"><img src="/OPS245dev/img/logo.svg" alt="Seneca College" class="themedImage_ToTc themedImage--light_HNdA"><img src="/OPS245dev/img/logo-dark.svg" alt="Seneca College" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OPS245 - Dev Space for Fall 2023</b></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OPS245dev/">Welcome to OPS245</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OPS245dev/weekly-schedule">Weekly Schedule</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/OPS245dev/A-Labs/lab1">Labs</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS245dev/A-Labs/lab1">Lab 1</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/OPS245dev/A-Labs/lab2">Lab 2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS245dev/A-Labs/lab3">Lab 3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS245dev/A-Labs/lab4">Lab 4</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS245dev/A-Labs/lab5">Lab 5</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS245dev/A-Labs/lab6">Lab 6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS245dev/A-Labs/lab7">Lab 7</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OPS245dev/A-Labs/lab8">Lab 8</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OPS245dev/B-Assignments/assignment1">Assignments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/OPS245dev/C-ExtraResources/tips">Extra Resources</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/OPS245dev/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Labs</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lab 2</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lab 2: Creating and Using Virtual Machines</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-preparation">Lab Preparation<a class="hash-link" href="#lab-preparation" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="purpose--objectives-of-lab-2">Purpose / Objectives of Lab 2<a class="hash-link" href="#purpose--objectives-of-lab-2" title="Direct link to heading">​</a></h3><p>In this lab, you will create 3 remaining virtual machines using another virtualisation program called <strong>KVM</strong> that will run in your debhost VM. These VMs will be used throughout the remainder of this course to learn how to administer them (installing software, managing services, networking, etc).</p><p>While you are performing this lab, it is recommended to generally note the major differences in the different installation methods, and which method you prefer to use if you were a Linux system administrator in charge of installing many Linux distributions for an organization.</p><p><strong>Main Objectives</strong></p><ul><li><p>Installing additional Virtualisation Software on your <strong>debhost</strong> machine (<strong>KVM</strong>)</p></li><li><p>Create 3 separate VMs (virtual machines) using different installation methods:</p><ul><li><strong>deb1</strong>: Network Debian Installation (<strong>Graphical Desktop Environment</strong>)</li><li><strong>deb2</strong>: Network Debian Installation (minimal install - <strong>CLI only</strong>)</li><li><strong>deb3</strong>: Network Debian Installation deployed using Ansible playbook file (<strong>CLI only</strong>)</li></ul></li><li><p>Manipulate virtual machines by CLI (<strong>virsh</strong>)</p></li><li><p>Properly <strong>backup VM images</strong> and backup <strong>VM configuration files</strong></p></li><li><p>Create and run <strong>Bash Shell scripts</strong> to automatically backup our installed VM&#x27;s</p></li></ul><p><img loading="lazy" alt="Lab Environment" src="/OPS245dev/assets/images/labenv-0528e8ad39033cba7973ed67517bf177.png" width="862" height="672" class="img_ev3q"></p><p>At the end of Lab 2, your VirtualBox application will contain <strong>4 virtual machines</strong> (<strong>debhost</strong> in your <strong>VirtualBox</strong> application, and <strong>deb1, deb2, deb3 VMs</strong> in your <strong>KVM</strong> application). You will now have the option to run one virtual machine at a time, or run all machines simultaneously to learn about networking (covered in later labs)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="minimum-required-materials">Minimum Required Materials<a class="hash-link" href="#minimum-required-materials" title="Direct link to heading">​</a></h3><ol><li><strong>Solid State Drive</strong></li><li><strong>USB key</strong> (for backups)</li><li><strong>Lab2 Log Book</strong></li><li><strong>Debian 12 netinst ISO</strong></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-command-reference">Linux Command Reference<a class="hash-link" href="#linux-command-reference" title="Direct link to heading">​</a></h3><p><strong>Virtualization:</strong></p><ul><li><a href="http://linux.die.net/man/1/virt-manager" target="_blank" rel="noopener noreferrer">virt-manager</a></li><li><a href="http://linux.die.net/man/1/virsh" target="_blank" rel="noopener noreferrer">virsh</a></li></ul><p><strong>Installation Guides:</strong></p><ul><li><a href="http://wiki.Debian.org/KVM" target="_blank" rel="noopener noreferrer">Installing &amp; Using KVM on Debian</a></li><li><a href="http://www.dedoimedo.com/computers/kvm-intro.html" target="_blank" rel="noopener noreferrer">Using KVM (tutorial)</a></li><li><a href="https://libvirt.org/sources/virshcmdref/html-single/" target="_blank" rel="noopener noreferrer">virsh command reference</a></li></ul><p><strong>Miscellaneous</strong></p><table><thead><tr><th><a href="http://linuxcommand.org/lc3_man_pages/gzip1.html" target="_blank" rel="noopener noreferrer">gzip , gunzip</a></th><th><a href="http://man7.org/linux/man-pages/man8/ip.8.html" target="_blank" rel="noopener noreferrer">ip</a></th><th><a href="http://man7.org/linux/man-pages/man1/grep.1.html" target="_blank" rel="noopener noreferrer">grep</a></th><th><a href="http://man7.org/linux/man-pages/man1/wc.1.html" target="_blank" rel="noopener noreferrer">wc</a></th><th><a href="http://man7.org/linux/man-pages/man1/pwd.1.html" target="_blank" rel="noopener noreferrer">pwd</a></th><th><a href="http://man7.org/linux/man-pages/man1/ls.1.html" target="_blank" rel="noopener noreferrer">ls</a></th><th><a href="http://man7.org/linux/man-pages/man1/more.1.html" target="_blank" rel="noopener noreferrer">more</a></th><th><a href="http://man7.org/linux/man-pages/man1/file.1.html" target="_blank" rel="noopener noreferrer">file</a></th><th><a href="http://man7.org/linux/man-pages/man1/wget.1.html" target="_blank" rel="noopener noreferrer">wget</a></th><th><a href="http://man7.org/linux/man-pages/man1/chmod.1.html" target="_blank" rel="noopener noreferrer">chmod</a></th><th><a href="http://ss64.com/vi.html" target="_blank" rel="noopener noreferrer">vi</a></th></tr></thead></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-1-setup-for-nested-virtual-machines">Investigation 1: Setup For Nested Virtual Machines<a class="hash-link" href="#investigation-1-setup-for-nested-virtual-machines" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-install-kvm-virtualisation-application">Part 1: Install KVM Virtualisation Application<a class="hash-link" href="#part-1-install-kvm-virtualisation-application" title="Direct link to heading">​</a></h3><p>We will now install the KVM package in order to create our remaining &quot;nested&quot; VMs. We will also be starting several services (including iptables) and disabling the firewalld service. We will learn more about managing firewalls using iptables in Lab 6.</p><p><strong>Perform the following steps:</strong></p><ol><li>Log into your <code>debhost</code> machine.</li><li>perform a software update on your debhost VM by issuing the following command:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> upgrade</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Install the qemu-system libvirt-daemon-system, virtinst, and virt-manager packages</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> qemu-system libvirt-daemon-system virtinst virt-manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>About KVM</strong></p><p>There are actually several key programs installed for virtualisation using KVM:</p><ul><li><strong>kvm/qemu</strong> - the hypervisor and other hardware emulation systems.</li><li>A system service named <strong>libvirtd</strong> that manages the VMs.</li><li>A graphical tool for managing virtual machines (<strong>virt-manager</strong>) and the <strong>virsh</strong> command-line tool.</li></ul><ol start="4"><li><strong>Restart your debhost virtual machine</strong>. If you fail to do this, you may experience virtualisation network problems.</li><li>Now we will confirm the status of the &quot;libvirtd&quot; virtualisation service:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl status libvirtd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="libvirtdstatus" src="/OPS245dev/assets/images/libvirtdstatus-e31bc28a98e564cc0920ff28b4560a48.png" width="1070" height="398" class="img_ev3q"></p><p>In the screenshot above you can see the first &quot;enabled&quot; indicates that this service will start automatically when the system starts.
The &quot;preset: enabled&quot; indicates that &quot;enabled&quot; is the default when this service is first installed by apt.
The &quot;inactive (dead)&quot; indicates that the service is not currently running.</p><p>We want the service to be &quot;enabled&quot; and &quot;active&quot;:</p><p><strong>Make note of the following commands for working with services:</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># To enable a service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">servicename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To start a service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl start </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">servicename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To enable and start a service at the same time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> --now </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">servicename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To disable a service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl disable </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">servicename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To stop a service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl stop </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">servicename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To restart a service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl restart </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">servicename</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># To see the status of a service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> systemctl status </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">servicename</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li><p>Issue the correct commands to make sure that the &quot;libvirtd&quot; service is both &quot;active&quot; (started) and &quot;enabled&quot; (will start automatically at boot)</p><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGuUlEQVR4nO1aCWwUVRj+SqlyCFhEKFCkKIQWihxC5GqhXG05eyEBgSgeBA/kEgkBCsh9eHAGUaiAHEVKu++15UgEFWJENEYFNQoERVFRAbl2puJv/mnfdunstNuytLvtfsmXzM7ue/N//3vz3j/fLOCHH3744YcfflQE6BCqUzoCURVhF0jRBC4z7dlIRlXCtRyEagJXdQliahLXr0s0R1WBLpGuxDsosAtVAXnZ6GMSX8A8Gwagsi96usBXLPZaVjWaPbWdQT4umAUn6DiCUFmhS0xWo/3ySx1owGMx1H94jHHsdCtMQmUE7UdDTeIii/x2Sx1q0DOZzu6oST/vqkH3RyXTN2l18xdEgcuUi8aobNAFNqtRjh/Rm5bPDHeM+rKZ4dRveB/n9WATKhP0bHTWJG6yuD3LQykiblDhfS9B120BFBk/kDJWhKpZ8J+eg66oDKBUVNMkPmVhVzKrUcv+Q0i+0di0A+xf1Yha9B1K/2QGqnOfc1v4OnSJZ5XIOdMiKXlMT5dbIDNxTBTNnRbp+KwJPANfBkkEawJ/sJjT22sZC98PW2tbJqDobzSBvygD98FXoQmssRpdK6a+HElJTrNEk1gNX4QmEKkJ5LGIfatCit7fliy6TmgS/2oC7eFr0CQOO6/we1c2LVG8YtGdQhM4QoQA+Ao0gceVmKUzI4xqz13xVrWClo1R8AVQOu7RJc5x0EWrvNLQuVosmAXnKQd14e3QJJYqEaPHdaPpznV+KcnPCGOf6uq8IC6BN+NGFlpqAnYO9qP1DSi0dwL9nVHdJIxnxsgnulPdbsMNjnqyO53bWcP0O27bNCaBPljbUCVAs+eiNbwVmkAOB2oXAdR5SCxtW9zcJIp3grZxAwmdRt3CyLiBxg5Q9PdbFoVRx0FxdEMEqFvhALwRdhsSVNBrUltRj4T+HKxJUNrCMJN4xa2LzAlj9krqS+vmtnR8tgsMhTeBDqGGLnGag/t9910UEp1Ex98Odilm+gsPWyZgxsR2Ltt8uakeNYxOovO771bnTvE14S3QJVJVsOPHd6Hnn+tsubAtmBJumYCFU1tbtpswobNBxzmB2fAGXN+LZsrhPbYxuOhImbj11VDLBGybn/847IpqZn22MdjhJN/IRZg3GB17ChYnikrqRxvmPVTs1nZkTbBlAo6ucX3bKPI60N15bRF4v0LF59nQVwW3eUEL6jQ4ztgBihPx644gywSc3xlUbFvuu8uQWGNnUOfyBGIrzuGV+JqD+CsjyNivP17foMTixm4D1e2aYhJfr1uK8V1J7T/ZUJ8a90qkP/cUJEvgZIU4ybrENBXUlBc70hNPP1pi8IptBsSbEtC2f7zb7bk6nDbRqcK0YUq5iqcsNNIELvHFT757a83uDmOTo00JiEuJcrs9V423OMkS/5Srk6wLbHGIGRFDK2dZb1+u+My4TqYE8LnS9LHc7CSnlY94ie6GaytB6cuamRxed/jqZHMtsKCYGsAVlc/A3oExCzgmgajycHiP8QUvZwZSWN+hdGB1o1IFblULFFcDWJGd5GYxw+jS3oIHLoEv7uj/DXSBCeri/E5v+NgepQ6a+d3mmhT4yEiHeD7+fpP7a4gz2T9kt9np3Pg7Ip72ob4mcYEvcuq92sbC9+M2a4e3ON7IAq2Y3IIa9kw0uHJqmHGuLH25dJJtaODxBGgS69VFh46KpvnT25YpYMWLu0BnNuSTj2+nL3aS2XVWnzWBtZ4Vn4OO7M5y57lvhtCD/dxzeMuLykkWrzuc5Jv8Os4j4okQoAl8yB1fzapGrQcMpszXmtx20NxHk94JRgVp80B//F4xPHaws5N81CNOsiYwVl1k8YwI452+J0aNxatFsGmvBI/0yU4yv2l23AoSo29v9DNRR5f4hTv7qaD6OpFWxyPBhkQXJqBxlGcSYHKSJX6jg6hX9tGXWKE6ZxNzxqT2HrtvN89qQiFRCYb4tFnmt8W34ySzG+2YBQLLyiTeLhGhCejcyeF191s6vGXl5d2gM2/l7wJ87Kl+uSh6oM+wQidZQLfbEF760RfI5Q7YjW0/KJ62L3nAY0HeabK52mFQfKGTLHGwdKOfjWTV2ao5rahnYj+XDq83k53ktam3OMmJbomndNTUBc7kNwowfLgv3rm3wgWVluxKs3HiNHBnyYZa7kz9eYVZCzC2q6kTO9LCV9r4FNmk4QelIjM3tfjRP44gTeKKcybZ8OBSk1dXXyLHzNuisxbDODmE6iU97l6o6Ol7p6hJ/FniH6/sAonqfz2ViazJ7YXQDz/88MMPP/xAVcD/A7vKkHQBotAAAAAASUVORK5CYII=" width="64" height="64" class="img_ev3q">
The behaviour of the <strong>libvirtd</strong> service on Debian Linux is for the service to stop when not in use and restart when required.</p></blockquote><blockquote></blockquote></li><li><p>In order to manage VMs your user account needs to be added to the &quot;libvirt&quot; group</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> -aG libvirt </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">username</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="8"><li><p>Logout of the desktop and log back in again. (A reboot is NOT required)</p></li><li><p>Start the graphical <code>virt-manager</code> tool by clicking &quot;Activities &quot; and searching for &quot;virt-manager&quot;.</p></li><li><p>Right click on the icon and &quot;Pin to dash&quot; and then run the application or by typing the command <code>virt-manager</code> (without sudo!)</p></li><li><p>Confirm that &quot;debhost&quot; is configured to allow nested virtualisation:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># If you have an Intel CPU the following should output &quot;Y&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /sys/module/kvm_intel/parameters/nested</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># If you have an AMD CPU the following should output &quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /sys/module/kvm_amd/parameters/nested</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You will be learning in the next investigations to perform 3 different types of Debian Linux installs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-2-install-nested-virtual-machines-kvm">Investigation 2: Install Nested Virtual Machines (KVM)<a class="hash-link" href="#investigation-2-install-nested-virtual-machines-kvm" title="Direct link to heading">​</a></h2><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q"><strong>Keep the root password the same for Host and VMs</strong></p><p>In order to simplify running the lab checking scripts in future labs, using the same root password for ALL machines (debhost and virtual machines). Also use the same username and passwords for all of your machines (debhost and virtual machines).</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-setting-up-the-virtual-network">Part 1: Setting up the Virtual Network<a class="hash-link" href="#part-1-setting-up-the-virtual-network" title="Direct link to heading">​</a></h3><p>Once we have installed our 3 VM&#x27;s we will want to configure them to be able to communicate on the same network.
KVM has setup a default virtual network for us to use but it is not configured to start automatically. We will also need to make sure the correct firewall and routing rules are added so that everything works.
Lets start by gathering information</p><ol><li>Open a terminal window in debhost and run the following command to display the networks that debhost is connected to.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># List the networks connected and our IP address for each network interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> address</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="ipaddr" src="/OPS245dev/assets/images/ipaddr-47a5cc3ce0ae05429175f7e220aed449.png" width="953" height="298" class="img_ev3q"></p><ol start="2"><li>Run the following command to list the current firewall/routing rules.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># List the iptables rules</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> iptables -L</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="iptables1" src="/OPS245dev/assets/images/iptables1-c85eba8bf6b7d8c106363a7955c86c47.png" width="571" height="279" class="img_ev3q"></p><ol start="3"><li>Open virt-manager</li><li>Select the QEMU/KVM connection and then click on Edit --&gt; Connection Details</li><li>Select the Virtual Networks tab</li><li>Check the &quot;Autostart: On Boot&quot; and then click Apply</li><li>Close virt-manager and reboot. You can use the command <code>sudo reboot</code> or the graphical option.</li><li>Open a terminal window and rerun the previous commands to list network addresses and iptables rules
<img loading="lazy" alt="ipaddr2" src="/OPS245dev/assets/images/ipaddr2-90ab0adf6ac42bdab8d637aa4f241ce7.png" width="1116" height="392" class="img_ev3q"><img loading="lazy" alt="iptables2" src="/OPS245dev/assets/images/iptables2-df32a8daf66f54f862ce1faab696e855.png" width="892" height="933" class="img_ev3q">
You can see that debhost has connected to the virtual network and iptables rules have been added to configure access to that network.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-installing-deb1">Part 2 Installing deb1<a class="hash-link" href="#part-2-installing-deb1" title="Direct link to heading">​</a></h3><p><strong>VM Details:</strong></p><ul><li><strong>VM Name (and hostname)</strong>: deb1</li><li><strong>Debian Network Install with Graphical Desktop Environment</strong>:</li><li><strong>VM Image Pathname</strong>: /var/lib/libvirt/images/deb1.qcow2</li><li><strong>Memory</strong>: 2048MB</li><li><strong>Disk space</strong>: 15GB</li><li><strong>CPUs</strong>: 2</li></ul><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q"> It would be best to download a local copy of the Debian &quot;netinst&quot; ISO</p><p><a href="https://www.debian.org/download" target="_blank" rel="noopener noreferrer">Download Debian</a></p></blockquote><p><strong>Perform the following steps:</strong></p><ol><li>Launch <code>virt-manager</code>.</li><li>Click the <strong>Create a new VM icon</strong> located near the top left-corner of the application window.</li><li>Select the <strong>Local install media</strong> option and click <strong>Forward</strong>.</li><li>Browse to the location of your ISO image. (probably ~/Downloads) and select the iso image</li><li>If the Operating System is not auto detected, uncheck the <strong>&quot;Automatically detect from the installation media&quot;</strong> and Choose <strong>Debian 11</strong>, and click <strong>Forward</strong>.</li></ol><p><img loading="lazy" alt="vmsource" src="/OPS245dev/assets/images/vmsource-63351551fd812f36ad9774343f09e5c1.png" width="469" height="446" class="img_ev3q"></p><ol start="6"><li>If a <strong>&quot;search permissions&quot;</strong> dialog box opens, Check <strong>&quot;Don&#x27;t ask about these directories again&quot;</strong> and click <strong>yes</strong></li></ol><p><img loading="lazy" alt="searchperms" src="/OPS245dev/assets/images/searchperms-9f89a5fa7839f7f5d7677fa74346cee2.png" width="402" height="266" class="img_ev3q"></p><ol start="7"><li><p>Set <strong>Memory</strong>: size to <strong>2048</strong> MB and <strong>CPUs</strong> to <strong>2</strong>, then click <strong>Forward</strong>.
<img loading="lazy" alt="memcpu" src="/OPS245dev/assets/images/memcpu-82e2f90ad23c0b4d3b31a6bfce82dd58.png" width="450" height="450" class="img_ev3q"></p></li><li><p>Set <strong>Hard Disk</strong> size to <strong>15</strong> GB and click <strong>Forward</strong>.</p></li><li><p>Enter the Name: <strong>deb1</strong>, AND then select the option: <strong>Customize configuration before install</strong>, and click <strong>Finish</strong>.</p></li><li><p>Another dialog will appear. Click <strong>CPUs</strong> (or &quot;processors&quot;) and on right-side under Configuration select <strong>Copy Host CPU Configuration</strong>, click <strong>Apply</strong>, and then click <strong>Begin Installation</strong> at the top left-hand side.</p></li><li><p>When the installer starts select &quot;&quot;Graphical Install&quot; and press enter</p><blockquote><p><strong>NOTES</strong></p><ul><li>To have the VM &quot;capture&quot; the keyboard and mouse input click on the viewer window</li><li>To release the keyboard and mouse from the VM use <strong>left-ctrl+left-alt</strong></li><li>To make the VM easier to display, click on <strong>View --&gt; Scale Display --&gt; Always</strong> &gt; <img loading="lazy" alt="scale" src="/OPS245dev/assets/images/scale-b0a1316b41c50f8715e7546801182f25.png" width="1044" height="376" class="img_ev3q"></li></ul></blockquote></li><li><p>Select <strong>English</strong> as the language</p></li><li><p>Select <strong>Canada</strong> as the location</p></li><li><p>Select <strong>American English</strong> as the keyboard</p></li><li><p>Enter a <strong>Hostname</strong> of <strong>deb1</strong></p></li><li><p>Leave the <strong>Domain name</strong>: <em>blank</em></p></li><li><p><strong>Do NOT set a root password</strong></p><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q"> &gt; <strong>Remember to user the same username and password on all of your VM&#x27;s</strong></p></blockquote></li><li><p>Enter your <strong>Full name</strong></p></li><li><p>Enter your <strong>Username</strong></p></li><li><p>Enter your <strong>password</strong> twice.</p></li><li><p>Select the <strong>Eastern</strong> time zone</p></li><li><p>When asked for <strong>Partitioning method</strong>: choose <strong>Guided - use entire disk and setup LVM</strong></p></li><li><p>Select <strong>Virtual disk 1(vda)</strong></p></li><li><p>Select <strong>All files in one partititon</strong></p></li><li><p>Select <strong>yes</strong> to <strong>Write the changes to disk and configure LVM</strong></p></li><li><p>Accept the default <strong>Amount of volume group to use for guided partitioning</strong>
<img loading="lazy" alt="deb1part" src="/OPS245dev/assets/images/deb1part-7df8236ca6914350a46d97ecc8562249.png" width="1031" height="794" class="img_ev3q"></p></li><li><p>Your storage should be configured as shown above. Select <strong>Finish partitioning and write changes to disk</strong></p></li><li><p>Select <strong>Yes</strong> to <strong>Write the changes to disks</strong></p></li><li><p>Select <strong>No</strong> to <strong>Scan extra installation media</strong></p></li><li><p>Select <strong>Canada</strong> as your <strong>Debian archive mirror country</strong></p></li><li><p>Select <strong>deb.debian.org</strong> as your <strong>Debian archive mirror:</strong></p></li><li><p>Leave <strong>HTTP proxy information</strong> as <em>blank</em></p></li><li><p>Select <strong>No</strong> to <strong>Participate in the package survey</strong></p></li><li><p>On the <strong>Software Selection Screen</strong> uncheck <strong>Gnome</strong> and select <strong>Cinnamon</strong> instead. Also select <strong>SSH Server</strong>
<img loading="lazy" alt="softsel" src="/OPS245dev/assets/images/softsel-4b046cb044747458f1516b57f78638c6.png" width="1032" height="798" class="img_ev3q"></p></li><li><p>Select <strong>Yes</strong> to <strong>Install the GRUB boot loader</strong></p></li><li><p>Select <strong>/dev/vda</strong> as the <strong>Device for boot loader installation</strong></p></li><li><p>When the installation is complete <strong>Reboot</strong></p><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q">
You may need to go into the VM details and remove the media from the <strong>CDROM</strong> device</p></blockquote></li><li><p>Repeat the steps as you did in Lab 1 to <strong>set the root account password</strong>, <strong>perform a system update</strong>, and <strong>disable AppArmor</strong>.</p></li><li><p>Issue the following command to obtain the IPv4 address for your deb1 VM to record in your Lab 2 logbook:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> address show</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="40"><li>Explore the Cinnamon Desktop Environment.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-3-installing-deb2-non-graphical-install">Part 3: Installing deb2 (Non-Graphical Install)<a class="hash-link" href="#part-3-installing-deb2-non-graphical-install" title="Direct link to heading">​</a></h3><p><strong>VM Details:</strong></p><ul><li><strong>VM Name (and hostname)</strong>: deb2</li><li><strong>Debian Network Install with TTY (command line) Interface only</strong>:</li><li><strong>VM Image Pathname</strong>: /var/lib/libvirt/images/deb2.qcow2</li><li><strong>Memory</strong>: 2048MB</li><li><strong>Disk space</strong>: 20GB</li><li><strong>CPUs</strong>: 1</li></ul><p><strong>Perform the following steps:</strong></p><ol><li><p>Create the VM (called <strong>deb2</strong>) as you did with the <strong>deb1</strong> VM.</p></li><li><p>Launch <code>virt-manager</code>.</p></li><li><p>Click the <strong>Create a new VM icon</strong> located near the top left-corner of the application window.</p></li><li><p>Select the <strong>Local install media</strong> option and click <strong>Forward</strong>.</p></li><li><p>Browse to the location of your ISO image. (probably ~/Downloads) and select the iso image</p></li><li><p>If the Operating System is not auto detected, uncheck the <strong>&quot;Automatically detect from the installation media&quot;</strong> and Choose <strong>Debian 11</strong>, and click <strong>Forward</strong>.</p></li><li><p>Set <strong>Memory</strong>: size to <strong>2048</strong> MB and <strong>CPUs</strong> to <strong>1</strong>, then click <strong>Forward</strong>.</p></li><li><p>Set <strong>Hard Disk</strong> size to <strong>20</strong> GB and click <strong>Forward</strong>.</p></li><li><p>Enter the Name: <strong>deb2</strong>, AND then select the option: <strong>Customize configuration before install</strong>, and click <strong>Finish</strong>.</p></li><li><p>Another dialog will appear. Click <strong>CPUs</strong> (or &quot;processors&quot;) and on right-side under Configuration select <strong>Copy Host CPU Configuration</strong>, click <strong>Apply</strong>, and then click <strong>Begin Installation</strong> at the top left-hand side.</p></li><li><p>When the installer starts select &quot;&quot;Graphical Install&quot; and press enter</p></li><li><p>Select <strong>English</strong> as the language</p></li><li><p>Select <strong>Canada</strong> as the location</p></li><li><p>Select <strong>American English</strong> as the keyboard</p></li><li><p>Enter a <strong>Hostname</strong> of <strong>deb2</strong></p></li><li><p>Leave the <strong>Domain name</strong>: <em>blank</em></p></li><li><p><strong>Do NOT set a root password</strong></p><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q"> &gt; <strong>Remember to user the same username and password on all of your VM&#x27;s</strong></p></blockquote></li><li><p>Enter your <strong>Full name</strong></p></li><li><p>Enter your <strong>Username</strong></p></li><li><p>Enter your <strong>password</strong> twice.</p></li><li><p>Select the <strong>Eastern</strong> time zone</p></li><li><p>When asked for <strong>Partitioning method</strong>: choose <strong>Guided - use entire disk and setup LVM</strong></p></li><li><p>Select <strong>Virtual disk 1(vda)</strong></p></li><li><p>Select <strong>Separate /home partititon</strong></p></li><li><p>Select <strong>yes</strong> to <strong>Write the changes to disk and configure LVM</strong></p></li><li><p>Accept the default <strong>Amount of volume group to use for guided partitioning</strong>
<img loading="lazy" alt="deb2part" src="/OPS245dev/assets/images/deb2part-afc7d7f45486a21f7f1b4105cf911426.png" width="1061" height="564" class="img_ev3q"></p></li><li><p>Select <strong>Yes</strong> to <strong>Write the changes to disks</strong></p></li><li><p>Select <strong>No</strong> to <strong>Scan extra installation media</strong></p></li><li><p>Select <strong>No</strong> to <strong>Participate in the package survey</strong></p></li><li><p>On the <strong>Software Selection Screen</strong> uncheck <strong>Debian desktop environment</strong> and <strong>Gnome</strong>. Also add the selection <strong>SSH Server</strong>
<img loading="lazy" alt="softsel2" src="/OPS245dev/assets/images/softsel2-237b4c394227f0547a770cab6b79d7c4.png" width="1340" height="647" class="img_ev3q"></p></li><li><p>Select <strong>Yes</strong> to <strong>Install the GRUB boot loader</strong></p></li><li><p>Select <strong>/dev/vda</strong> as the <strong>Device for boot loader installation</strong></p></li><li><p>When the installation is complete <strong>Reboot</strong></p><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGuUlEQVR4nO1aCWwUVRj+SqlyCFhEKFCkKIQWihxC5GqhXG05eyEBgSgeBA/kEgkBCsh9eHAGUaiAHEVKu++15UgEFWJENEYFNQoERVFRAbl2puJv/mnfdunstNuytLvtfsmXzM7ue/N//3vz3j/fLOCHH3744YcfflQE6BCqUzoCURVhF0jRBC4z7dlIRlXCtRyEagJXdQliahLXr0s0R1WBLpGuxDsosAtVAXnZ6GMSX8A8Gwagsi96usBXLPZaVjWaPbWdQT4umAUn6DiCUFmhS0xWo/3ySx1owGMx1H94jHHsdCtMQmUE7UdDTeIii/x2Sx1q0DOZzu6oST/vqkH3RyXTN2l18xdEgcuUi8aobNAFNqtRjh/Rm5bPDHeM+rKZ4dRveB/n9WATKhP0bHTWJG6yuD3LQykiblDhfS9B120BFBk/kDJWhKpZ8J+eg66oDKBUVNMkPmVhVzKrUcv+Q0i+0di0A+xf1Yha9B1K/2QGqnOfc1v4OnSJZ5XIOdMiKXlMT5dbIDNxTBTNnRbp+KwJPANfBkkEawJ/sJjT22sZC98PW2tbJqDobzSBvygD98FXoQmssRpdK6a+HElJTrNEk1gNX4QmEKkJ5LGIfatCit7fliy6TmgS/2oC7eFr0CQOO6/we1c2LVG8YtGdQhM4QoQA+Ao0gceVmKUzI4xqz13xVrWClo1R8AVQOu7RJc5x0EWrvNLQuVosmAXnKQd14e3QJJYqEaPHdaPpznV+KcnPCGOf6uq8IC6BN+NGFlpqAnYO9qP1DSi0dwL9nVHdJIxnxsgnulPdbsMNjnqyO53bWcP0O27bNCaBPljbUCVAs+eiNbwVmkAOB2oXAdR5SCxtW9zcJIp3grZxAwmdRt3CyLiBxg5Q9PdbFoVRx0FxdEMEqFvhALwRdhsSVNBrUltRj4T+HKxJUNrCMJN4xa2LzAlj9krqS+vmtnR8tgsMhTeBDqGGLnGag/t9910UEp1Ex98Odilm+gsPWyZgxsR2Ltt8uakeNYxOovO771bnTvE14S3QJVJVsOPHd6Hnn+tsubAtmBJumYCFU1tbtpswobNBxzmB2fAGXN+LZsrhPbYxuOhImbj11VDLBGybn/847IpqZn22MdjhJN/IRZg3GB17ChYnikrqRxvmPVTs1nZkTbBlAo6ucX3bKPI60N15bRF4v0LF59nQVwW3eUEL6jQ4ztgBihPx644gywSc3xlUbFvuu8uQWGNnUOfyBGIrzuGV+JqD+CsjyNivP17foMTixm4D1e2aYhJfr1uK8V1J7T/ZUJ8a90qkP/cUJEvgZIU4ybrENBXUlBc70hNPP1pi8IptBsSbEtC2f7zb7bk6nDbRqcK0YUq5iqcsNNIELvHFT757a83uDmOTo00JiEuJcrs9V423OMkS/5Srk6wLbHGIGRFDK2dZb1+u+My4TqYE8LnS9LHc7CSnlY94ie6GaytB6cuamRxed/jqZHMtsKCYGsAVlc/A3oExCzgmgajycHiP8QUvZwZSWN+hdGB1o1IFblULFFcDWJGd5GYxw+jS3oIHLoEv7uj/DXSBCeri/E5v+NgepQ6a+d3mmhT4yEiHeD7+fpP7a4gz2T9kt9np3Pg7Ip72ob4mcYEvcuq92sbC9+M2a4e3ON7IAq2Y3IIa9kw0uHJqmHGuLH25dJJtaODxBGgS69VFh46KpvnT25YpYMWLu0BnNuSTj2+nL3aS2XVWnzWBtZ4Vn4OO7M5y57lvhtCD/dxzeMuLykkWrzuc5Jv8Os4j4okQoAl8yB1fzapGrQcMpszXmtx20NxHk94JRgVp80B//F4xPHaws5N81CNOsiYwVl1k8YwI452+J0aNxatFsGmvBI/0yU4yv2l23AoSo29v9DNRR5f4hTv7qaD6OpFWxyPBhkQXJqBxlGcSYHKSJX6jg6hX9tGXWKE6ZxNzxqT2HrtvN89qQiFRCYb4tFnmt8W34ySzG+2YBQLLyiTeLhGhCejcyeF191s6vGXl5d2gM2/l7wJ87Kl+uSh6oM+wQidZQLfbEF760RfI5Q7YjW0/KJ62L3nAY0HeabK52mFQfKGTLHGwdKOfjWTV2ao5rahnYj+XDq83k53ktam3OMmJbomndNTUBc7kNwowfLgv3rm3wgWVluxKs3HiNHBnyYZa7kz9eYVZCzC2q6kTO9LCV9r4FNmk4QelIjM3tfjRP44gTeKKcybZ8OBSk1dXXyLHzNuisxbDODmE6iU97l6o6Ol7p6hJ/FniH6/sAonqfz2ViazJ7YXQDz/88MMPP/xAVcD/A7vKkHQBotAAAAAASUVORK5CYII=" width="64" height="64" class="img_ev3q">
You may need to go into the VM details and remove the media from the <strong>CDROM</strong> device</p></blockquote></li><li><p>Repeat the steps as you did in Lab 1 to <strong>set the root account password</strong>, <strong>perform a system update</strong>, and <strong>disable AppArmor</strong>.</p></li><li><p>Issue the following command to obtain the IPv4 address for your <strong>deb2</strong> VM to record in your Lab 2 logbook:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ip</span><span class="token plain"> address show</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-4-installing-deb3-using-ansible">Part 4: Installing deb3 using Ansible<a class="hash-link" href="#part-4-installing-deb3-using-ansible" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-3-managing-virtual-machines-kvm">Investigation 3: Managing Virtual Machines (KVM)<a class="hash-link" href="#investigation-3-managing-virtual-machines-kvm" title="Direct link to heading">​</a></h2><p><strong>Root Privileges</strong></p><p>As part of this investigation you will learn how to switch over to the root account in order to run several privileged commands in sequence. It can be tempting to just use this technique all the time, and never have to worry about sudo, but do <strong>not</strong> do so. It undermines the security of your system. Use it only when you need it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1-backing-up-virtual-machines">Part 1: Backing Up Virtual Machines<a class="hash-link" href="#part-1-backing-up-virtual-machines" title="Direct link to heading">​</a></h3><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q">
Taking the time to backup the image of the Virtual Machines filesystem allows the user to return to a &quot;<strong>restoration point</strong>&quot; using the <strong>gunzip</strong> command.</p><p>This allows us to recover in case something bad occurs during a Lab!</p><p>Failure to take the time to make and confirm backups can result in loss of lab work for the student!</p><p>There are three general steps to back up your Virtual Machines:</p></blockquote><ul><li>Shutdown the VM</li><li>Create a compressed copy of your <strong>Disk Images</strong> using the <strong>gzip</strong> command.</li><li>Backup the VM xml configuration using the <strong>virsh</strong> shell command.</li></ul><blockquote><p>The <code>virsh</code> command is a command line tool/shell for managing VM&#x27;s
We use it to connect to the hypervisor and then interact with our VM&#x27;s</p><p>In order to use the <strong>virsh</strong> command as a regular user to connect to our VM&#x27;s we must configure an ENVIRONMENT variable.</p><p>Edit the file <code>~/.bashrc</code> as your regular user on <code>debhost</code></p><p>Add the following to the file</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># virsh connection variable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">LIBVIRT_DEFAULT_URI</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;qemu:///system&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Logout and login again to <code>debhost</code></p><p>The following example <code>virsh</code> commands will be useful</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># List all running (active) VM&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># List all inactive VM&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> list --inactive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># List all VM&#x27;s (active or not)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> list --all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Start a VM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> start </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">vmname</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Shutdown a VM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">shutdown</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">vmname</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Force off a VM (if shutdown fails)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> destroy </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">vmname</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Display the xml data that defines the VM configuration</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> dumpxml </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">vmname</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To view the VM in a window without using <code>virt-manager</code></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Open VM in viewer window</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">virt-viewer </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">vmname</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><p><strong>Perform the following steps:</strong></p><ol><li><p>Login to a terminal on <code>debhost</code> as your regular user</p></li><li><p>Shut down your <strong>deb1</strong>, <strong>deb2</strong>, and <strong>deb3</strong> VMs.</p><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q">
You can shutdown the VM&#x27;s from the user interface, (For <em>deb2</em> and <em>deb3</em>, which are CLI-only, you can issue the following command to shutdown: <code>sudo poweroff</code>, or you can use the <code>virsh</code> command.
Please be patient, the VMs will shut down!</p></blockquote></li><li><p>Create a directory for your backups. <code>mkdir ~/backups</code></p></li><li><p>Enter the command <code>virsh dumpxml deb1</code></p><p>This command will output the xml data that is used to define (create) this VM
If we save this output we could use that xml data to recreate the VM</p></li><li><p>Enter the command <code>virsh dumpxml deb1 &gt; ~/backups/deb1.xml</code> to save a copy of the output.</p></li><li><p>Enter 2 more commands to save the xml data for <code>deb2</code> and <code>deb3</code></p><p>Backing up the xml data only has to be done when the VM is created, or if the configuration is modified.</p></li><li><p>We will need to use elevated privileges to backup our disk image files from the default location of <code>/var/lib/libvirt/images/</code></p></li><li><p>Use the command <code>sudo -i</code> and enter your password if prompted.</p></li></ol><blockquote><p><code>sudo -i</code> will start a new shell as the root user, you can run a number of commands and then type <code>exit</code> to return to your previous shell.</p></blockquote><ol start="9"><li><p>Change to the images directory: <code>cd /var/lib/libvirt/images/</code>. Note that you did not need to use sudo, as you are already using elevated permissions.</p></li><li><p>Type <code>ls -l</code> to see the contents</p></li><li><p>To make a compressed copy of your <strong>deb1.qcow2</strong>, <strong>deb2.qcow2</strong>, and <strong>deb3.qcow2</strong> files we will use the <code>gzip</code> command.</p><p>The <code>gzip</code> command will compress the file in place and rename the file with a <code>.gz</code> extension.
However, this will make the file unusable and doesn&#x27;t create a copy. We will use STDIN and STDOUT redirection to overcome this.</p></li><li><p>Issue the commands:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">gzip</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> deb1.qcow2 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ~YourRegularUsername/backups/deb1.qcow2.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">gzip</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> deb2.qcow2 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ~YourRegularUsername/backups/deb2.qcow2.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">gzip</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> deb3.qcow2 </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> ~YourRegularUsername/backups/deb3.qcow2.gz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>NOTE</strong>: Make certain to use the redirection signs &quot;&lt;&quot; and &quot;<!-- -->&gt;<!-- -->&quot; properly in the command!</p><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q"><strong>Please be patient</strong></p><p>It may look like the command prompt is stuck but it could take a while for gzip to compress an entire operating system.</p><p><strong>NOTE</strong>: Do <strong>NOT</strong> press <code>&lt;ctrl&gt;c</code> to cancel this process. If you do, your archive will become incomplete and your recovery will be corrupt.</p></blockquote><ol start="13"><li>Compare the size of the compressed and original files (hint: use <code>ls -lh</code>). If file is very large (like 15GB), you didn&#x27;t compress it and you need to remove that file and perform the previous step until you get it right!</li><li>Once you are <strong>sure you have all three VM disk images backed up</strong>, use the <code>exit</code> command to revert back to your normal user.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2-testing-the-backup">Part 2: Testing the backup<a class="hash-link" href="#part-2-testing-the-backup" title="Direct link to heading">​</a></h3><ol><li><p>Start the <strong>deb3</strong> VM and login.</p><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q"> <strong>THIS WILL DESTROY YOUR SYSTEM</strong></p><p><strong>Make certain that you are in your <code>deb3</code> VM and not in <code>debhost</code>!</strong></p></blockquote></li><li><p>Type this command inside the deb3 virtual machine: <code>sudo rm -rf /*</code> (ignore error messages).</p></li><li><p>Type the command <code>sudo poweroff</code>, try other commands.</p></li><li><p>Force the VM to poweroff and restart</p></li><li><p>When the machine restarts it will not boot since all system files have been removed!</p></li><li><p>Use the <strong>Force Off</strong> option to turn deb3 back off.</p></li><li><p>Run <code>virt-manager</code> right click on the <code>deb3</code> VM and select <strong>Delete</strong> make sure that <strong>Delete associated storage file</strong> is selected and <strong>Delete</strong></p><p><code>deb3</code> is now completely gone. Time to test the backup!</p></li><li><p>To restore the VM configuration:</p></li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># List all VM&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> list --all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Define a VM from xml data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> define ~/backups/deb3.xml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># List all VM&#x27;s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">virsh</span><span class="token plain"> list --all</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="8"><li>To restore the <code>deb3</code> disk image file:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Start a sudo shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> -i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Change to images directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> /var/lib/libvirt/images</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Restore file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gunzip </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> ~YourRegularUserName/backups/deb3.qcow2.gz </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> deb3.qcow2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Return to previous shell</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">exit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="9"><li>Start the <code>deb3</code> VM and login to make sure it was successfully restored</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-3-restoring-virtual-machines">Part 3: Restoring Virtual Machines<a class="hash-link" href="#part-3-restoring-virtual-machines" title="Direct link to heading">​</a></h3><ol><li>We will now download a compressed image file and XML configuration file and add it as a VM to the Virtual Machine Manager menu.</li><li>Issue the following commands:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Change to ~/backups</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> ~/backups</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Download disk image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://matrix.senecacollege.ca/~ops245/centos4.qcow2.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Download xml data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://matrix.senecacollege.ca/~ops245/centos4.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li><p>Use the same procedure as above in Part 2, use <code>gunzip</code> with elevated privileges to decompress the qcow2 image file into the <strong>/var/lib/libvirt/images</strong> directory, and define a VM from the xml file.</p></li><li><p>What happened in the <code>virt-manager</code> window?</p></li><li><p>In order to remove a VM entry in the Virtual Manager window, simply issue the command <code>virsh undefine &lt;vmname&gt;</code> without the <strong>.xml</strong> file extension</p></li><li><p>Start up your <code>centos4</code> VM.</p></li><li><p>Click on the user <em>OPS245</em>, and login with the password <strong>ops245</strong>.</p></li></ol><blockquote><p><img loading="lazy" alt="caution" src="data:image/png;base64,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" width="64" height="64" class="img_ev3q"><strong>Shutting Down the Host while Virtual Machines are Running</strong></p><p>If you shut down your host system while virtual machines are running, they will be suspended, and will resume the next time you boot your host system. Note that it is better to shut down the VMs prior to shutting down the host</p></blockquote><ol start="8"><li><p>For the remainder of these labs, it is assumed that you will backup <strong>both</strong> the images and XML configuration files for <strong>all</strong> Virtual machines, when asked to backup your virtual machines. It is also highly recommended to backup these files to an external storage device (eg. USB key) in case the host machine gets &quot;wiped&quot; and you need to rebuild your HOST machine and then restore your Virtual Machines...</p></li><li><p>Answer this question in your log book:</p><ul><li>In order to fully back up a virtual machine, what information should be saved in addition to the virtual machine image?</li></ul></li><li><p>You can now safely remove the <code>centos4</code> VM and it&#x27;s disk image. They are no longer needed.</p></li></ol><p><strong>Answer INVESTIGATION 3 observations / questions in your lab log book.</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="investigation-4-using-python-to-automate-managing-virtual-machines">Investigation 4: Using Python To Automate Managing Virtual Machines<a class="hash-link" href="#investigation-4-using-python-to-automate-managing-virtual-machines" title="Direct link to heading">​</a></h2><p>This week you have added some significant capabilities to your python scripting. The ability to run loops and make decisions makes your scripts much more powerful. In this investigation you will write a python script that backs up the deb1, deb2, and deb3 VMs, or lets the user specify which VMs they want backed up.</p><p><strong>Please take a look at these <a href="/OPS245dev/C-ExtraResources/python-scripting-tips">Python Scripting Tips</a> before continuing with the steps below</strong></p><ol><li>In your <strong>bin</strong> directory, create the file <strong>backupVM.py</strong>, and populate with our standard beginning</li></ol><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#!/usr/bin/env python3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># backupVM.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Purpose: Backs up virtual machines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># USAGE: ./backupVM.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Author: *** INSERT YOUR NAME ***</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Date: *** CURRENT DATE ***</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">currentuser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">popen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;whoami&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> currentuser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;You must be root&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Backing up deb1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;gzip &lt; /var/lib/libvirt/images/deb1.qcow2 &gt; ~YourRegularUsername/backups/deb1.qcow2.gz&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Backing up deb2&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;gzip &lt; /var/lib/libvirt/images/deb2.qcow2 &gt; ~YourRegularUsername/backups/deb2.qcow2.gz&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Backing up deb3&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;gzip &lt; /var/lib/libvirt/images/deb3.qcow2 &gt; ~YourRegularUsername/backups/deb3.qcow2.gz&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><p>Try to run that script. You&#x27;ll notice it does not work. No matter what you do, it always says you are not root.</p></li><li><p>Modify the print statement that tells the user they must be root to also include the current username, then run the program again.</p></li><li><p>It should print out root, but with an extra new-line. You may have noticed this in your other python scripts so far: the data we get from os.popen() has an extra new-line on the end. We will need to modify the string(s) it gives us a bit. See the side-bar for hints on how to do so.</p></li><li><p>Modify the if statement so it is just getting the current username, not the username and a newline. You can do this using several steps and several variables, but it can also be done in a single line.</p></li><li><p>Test your script to make sure it works. If it doesn&#x27;t, go back and fix it. <strong>Do not continue until it successfully makes backups of your VMs</strong>.</p></li><li><p>There is a weakness to this script as written. Every time you run it, it will make a backup of all three VMs. But what if you only made a change to one of them? Do we really need to wait through a full backup cycle for two machines that didn&#x27;t change? As the script is currently written, we do. But we can make it better. We&#x27;ve provided the scripts with some comments below.</p></li><li></li></ol><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#!/usr/bin/env python3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># backupVM.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Purpose: Backs up virtual machines</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># USAGE: ./backupVM.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Author: *** INSERT YOUR NAME ***</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Date: *** CURRENT DATE ***</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Make sure script is being run with elevated permissions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">currentuser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">popen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;whoami&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">strip</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> currentuser </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;root&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;You must be root&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  exit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#The rest of this script identifies steps with comments &#x27;Step &lt;something&gt;&#x27;.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#This is not a normal standard for commenting, it has been done here to link the script</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># to the instructions on the wiki.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Step A: Find out if user wants to back up all VMs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Step B-1:use the existing loop to back up all the VMs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Backing up deb1&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;gzip &lt; /var/lib/libvirt/images/deb1.qcow2 &gt; ~YourRegularUsername/backups/deb1.qcow2.gz&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Backing up deb2&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;gzip &lt; /var/lib/libvirt/images/deb2.qcow2 &gt; ~YourRegularUsername/backups/deb2.qcow2.gz&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Backing up deb3&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">system</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;gzip &lt; /var/lib/libvirt/images/deb3.qcow2 &gt; ~YourRegularUsername/backups/deb3.qcow2.gz&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Step B-2: They don&#x27;t want to back up all VMs, prompt them for which VM they want to back up</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Step C: Prompt the user for the name of the VM they want to back up</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Step C-1: If the user chose deb1, back up that machine.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Step C-2: If the user chose deb2, back up that machine.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#Step C-3: If the user chose deb3, back up that machine.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="9"><li><p>Before the block that backs up each machine add a prompt to ask the user if they want to back up all machines. Use an if statement to check if they said yes (See comment &#x27;Step A&#x27;).</p><ul><li>if they did say yes, back up all the VMs using your existing block (Comment step B-1).</li><li>If they didn&#x27;t say yes, do nothing for now (you could even use python&#x27;s pass statement).</li></ul></li><li><p>Test your script to make sure it works. Check what happens if you say &#x27;yes&#x27; to the prompt, and check what happens if you say things other than &#x27;yes&#x27;.</p></li><li><p>Now we have a script that asks the user if they want to back up all VMS, and if they say they do, it does. But if they don&#x27;t want to back up every VM, it currently does nothing.</p></li><li><p>Add an else statement at comment Step B-2 to handle the user not wanting to back up every VM. Inside that else clause (Comment step C) ask the user which VM they would like to back up (you can even give them the names of available VMs (deb1, deb2, deb3).</p></li><li><p>Now nest an if statement inside that else (Comments C-1, C-2, and C-3) so that your script can handle what your user just responded with. If they asked for deb1, back up deb1. If they want to back up deb2, only back up deb2, etc. Hint: You might want to use elif for this.</p></li><li><p>Test your script again. You should now have a script that:</p><ul><li>Makes sure the user is running the script with elevated permissions.</li><li>Asks the user if they want to back up every VM.</li><li>If they want to back up every VM, it backs up every VM.</li><li>If the user does not want to back up every VM, the script asks them which VM they do want to back up.</li><li>If the user selected a single VM, the script will back up that one VM.</li><li>Now you may notice another issue with the script: The gzip lines are almost identical. The only difference in them is the name of the VM file being backed up. In the portion of code where you back up each machine individually (comment steps C-1, C-2, and C-3) try replacing the machine name in the gzip command with a string variable that holds the machine&#x27;s name instead. Note that you will have to make us of string concatenation for this to work correctly.</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab-2-sign-off-show-instructor">Lab 2 Sign-Off (Show Instructor)<a class="hash-link" href="#lab-2-sign-off-show-instructor" title="Direct link to heading">​</a></h2><p>Follow the submission instructions for lab 2 on Blackboard.</p><p><strong>Backup ALL of your VMs!</strong></p><p>If you have successfully completed this lab, make a new backup of all of your virtual machines onto your USB Key.</p><p><strong>Perform the Following Steps:</strong></p><ol><li>Use the <strong>virsh start</strong> command to launch all the VMs (<strong>deb1</strong>, <strong>deb2</strong>, and <strong>deb3</strong>).</li><li>Inside each virtual machine, run <code>ip a</code> on the command line. Open a Terminal window in deb1 to do so. You&#x27;ll need the IP address of each machine for the next steps.</li><li>Switch to your <strong>debhost</strong> VM, open a terminal, login as root, and change directory to <strong>/root/bin</strong>.</li><li>Issue the Linux command:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://raw.githubusercontent.com/OPS245/labs/main/lab2-check.bash</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>Give the <strong>lab2-check.bash</strong> file execute permissions (for the file owner).</li><li>Run the shell script and if any warnings, make fixes and re-run shell script until you receive &quot;congratulations&quot; message.</li><li>Arrange proof of the following on the screen:</li></ol><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> <strong>All VMs</strong>:</p><ul><li>All 4 nested VMs <strong>created</strong> and <strong>running</strong></li><li>Proof of <strong>yum updates</strong> on ALL VMs (i.e. results from <strong>yum update</strong> command)</li></ul></li><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> <strong>debhost VM:</strong></p><ul><li>Run the <strong>lab2-check.bash</strong> script in front of your instructor (must have all <code>OK</code> messages)</li></ul></li><li class="task-list-item"><p><input type="checkbox" checked="" disabled=""> <!-- -->Lab2 logbook notes completed.</p></li></ul><ol start="8"><li>Upload a screenshot of the proof listed above, the output file generated by the lab2-check.bash script, your log book, and your backupVM.py to blackboard.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="practice-for-quizzes-tests-midterm--final-exam">Practice For Quizzes, Tests, Midterm &amp; Final Exam<a class="hash-link" href="#practice-for-quizzes-tests-midterm--final-exam" title="Direct link to heading">​</a></h2><ol><li><p>What is the name of the Debian installation program?</p></li><li><p>What is the name of the file created by the Debian installation program?</p></li><li><p>Which type of installation works best for confirming compatibility with hardware before installation? Why?</p></li><li><p>Which type of installation works best for installing large numbers of computers? Why?</p></li><li><p>How can you reduce the number of software updates required immediately after installation?</p></li><li><p>How do you start and stop virtual machines?</p></li><li><p>How do you SSH into your virtual machines?</p></li><li><p>List the steps to install a VM from:</p><ul><li>Downloaded iso file</li><li>Network install (without kickstart file)</li><li>Network install (with kickstart file)</li></ul></li><li><p>What is the purpose of the virsh command?</p></li><li><p>How to start and stop VMs using the virsh command?</p></li><li><p>List the steps to correctly backup your VMs to a USB disk</p></li><li><p>List the steps to correctly restore your VMs from a USB disk to your debhost VM.</p></li><li><p>How can you prompt the user for data and store into a variable?</p></li><li><p>Show a few examples how loops can be used to error-check when prompting the user for data.</p></li><li><p>What does the command <strong>rpm -qi Debian-release</strong> do and why is it important?</p></li><li><p>What is the difference between <strong>rpm -q Debian-release</strong> and <strong>uname -a</strong>?</p></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seneca-ICTOER/OPS245dev/tree/main/docs/A-Labs/lab2.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/OPS245dev/A-Labs/lab1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lab 1</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/OPS245dev/A-Labs/lab3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Lab 3</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lab-preparation" class="table-of-contents__link toc-highlight">Lab Preparation</a><ul><li><a href="#purpose--objectives-of-lab-2" class="table-of-contents__link toc-highlight">Purpose / Objectives of Lab 2</a></li><li><a href="#minimum-required-materials" class="table-of-contents__link toc-highlight">Minimum Required Materials</a></li><li><a href="#linux-command-reference" class="table-of-contents__link toc-highlight">Linux Command Reference</a></li></ul></li><li><a href="#investigation-1-setup-for-nested-virtual-machines" class="table-of-contents__link toc-highlight">Investigation 1: Setup For Nested Virtual Machines</a><ul><li><a href="#part-1-install-kvm-virtualisation-application" class="table-of-contents__link toc-highlight">Part 1: Install KVM Virtualisation Application</a></li></ul></li><li><a href="#investigation-2-install-nested-virtual-machines-kvm" class="table-of-contents__link toc-highlight">Investigation 2: Install Nested Virtual Machines (KVM)</a><ul><li><a href="#part-1-setting-up-the-virtual-network" class="table-of-contents__link toc-highlight">Part 1: Setting up the Virtual Network</a></li><li><a href="#part-2-installing-deb1" class="table-of-contents__link toc-highlight">Part 2 Installing deb1</a></li><li><a href="#part-3-installing-deb2-non-graphical-install" class="table-of-contents__link toc-highlight">Part 3: Installing deb2 (Non-Graphical Install)</a></li><li><a href="#part-4-installing-deb3-using-ansible" class="table-of-contents__link toc-highlight">Part 4: Installing deb3 using Ansible</a></li></ul></li><li><a href="#investigation-3-managing-virtual-machines-kvm" class="table-of-contents__link toc-highlight">Investigation 3: Managing Virtual Machines (KVM)</a><ul><li><a href="#part-1-backing-up-virtual-machines" class="table-of-contents__link toc-highlight">Part 1: Backing Up Virtual Machines</a></li><li><a href="#part-2-testing-the-backup" class="table-of-contents__link toc-highlight">Part 2: Testing the backup</a></li><li><a href="#part-3-restoring-virtual-machines" class="table-of-contents__link toc-highlight">Part 3: Restoring Virtual Machines</a></li></ul></li><li><a href="#investigation-4-using-python-to-automate-managing-virtual-machines" class="table-of-contents__link toc-highlight">Investigation 4: Using Python To Automate Managing Virtual Machines</a></li><li><a href="#lab-2-sign-off-show-instructor" class="table-of-contents__link toc-highlight">Lab 2 Sign-Off (Show Instructor)</a></li><li><a href="#practice-for-quizzes-tests-midterm--final-exam" class="table-of-contents__link toc-highlight">Practice For Quizzes, Tests, Midterm &amp; Final Exam</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">OPS245 - Dev Space for Fall 2023</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/OPS245dev/">Contents</a></li><li class="footer__item"><a href="#" id="pwa-button" class="footer__link-item" hidden>Install as an App</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Seneca College.</div></div></div></footer></div>
<script src="/OPS245dev/assets/js/runtime~main.a542e620.js"></script>
<script src="/OPS245dev/assets/js/main.b4a20da8.js"></script>
</body>
</html>